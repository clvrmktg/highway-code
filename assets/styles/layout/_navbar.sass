@use 'sass:math'
@use '../abstracts' as *

.navbar
  background-color: color('brand')
  width: 100%
  height: var(--navbar-height)

  > .wrapper
    height: inherit
    z-index: 15
    outline: $by

    +device(desktop)
      display: grid
      grid-template-columns: auto 1fr

.backdrop
  width: 100vw
  height: inherit
  position: absolute
  inset-block: 0
  left: 50%
  transform: translateX(-50%)
  margin: auto
  z-index: -1

.logo
  +clamp(width, 100, 120)
  fill: color('white')

.menu-search
  width: 100vw
  height: 100vh
  @supports (height: 100dvh)
    height: 100dvh
  background-color: color('bg-soft')
  flex-direction: column
  padding-top: 2em
  position: absolute
  left: 50%
  transform: translateX(-50%)

  top: var(--navbar-height)

.navigation--main
  order: 2

  // +device(tablet)
  //   display: block
  //   width: em(338)
  //   height: 100vh
  //   // padding-top: 1em
  //   border-top: em(4) solid color('clever-blue-light')
  //   visibility: hidden
  //   position: absolute
  //   top: var(--navbar-height)
  //   left: 200vw
  //   z-index: -5
  //   +transition((visibility, left, background-color))

  // +device(desktop)
  //   display: flex
  //   height: 100%
    // outline: $bg


.menu
  display: flex
  // background-color: color('white')
  flex-direction: column

  +device(desktop)
    height: inherit

  &__item
    color: color('white')
    align-items: center

    +device(desktop)
      display: flex


          
    +device(tablet)
      flex-direction: column
      padding:
        top: 1em
        bottom: 1em
      border-bottom: em(2) solid color('grey-300')

  &__link
    color: var(--text-body)
    position: relative
    +transition(color)

    +device(tablet)
      display: block
      +clamp(padding-right, 10, 20)
      +clamp(padding-left, 10, 20)

    +device(desktop)
      color: inherit

      &::before, &::after
        content: ''
        position: absolute
        width: 100%
        height: 2px
        background-color: color('white')
        left: 0
        transform: scaleX(0)
        +transition(transform)

      &::before
        top: 0
        transform-origin: right

      &::after
        bottom: 0
        transform-origin: left

      +hover
        &::after, &::before
          transform: scaleX(1)

      &.current
        
        &::after, &::before
          transform: scaleX(1)
          
.toggle
  display: flex
  color: color('white')
  position: relative
  z-index: 2
  cursor: pointer

  +hover
    color: color('brand-500')
    background-color: color('white')

  +device(desktop)
    display: none

  &:has(#click:focus-visible)
    outline: -webkit-focus-ring-color auto 1px


.container:has(#click:checked)
  overflow: hidden
  position: fixed

  .navigation--main
    visibility: visible
    left: calc(100vw - #{em(355)})

    > ul
      opacity: 1
  
  .bar
    transform: rotate(225deg)
  
    &::before
      top: 0
      opacity: 0

    &::after
      bottom: 0
      transform: rotate(-90deg)

.container:has(#search-toggle:checked)
  
  .search
    
    &--toggle
      color: color('brand-500')
      background-color: color('white')

    &--wrapper
      height: auto

