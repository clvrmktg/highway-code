@use '../abstracts' as *
/* ====== Sidebar behaviors ====== */

.sidebar
  position: relative
  overflow: visible
//   outline: $bg

$min: $min-font-size * 3
$max: $max-font-size * 5

.isSticky
  position: sticky
  +clamp('top', $min, $max)
  align-self: start

/* ====== Section Nav (the first <aside>, NOT the ToC) ====== */
/* Select the first aside that doesn't carry the .section--toc class */
// Variables (adjust to your palette)
// Brand variables
$brand-500: #007C91   // primary brand color
$brand-700: darken($brand-500, 12%) // deeper shade for focus rings
$ink: #0a1e46         // body text / ink
$bg-soft: lighten($brand-500, 45%)  // soft background tint
$border: var(--border)

// Sidebar nav
.sidebar__navigation
  border: 1px solid $border
  border-radius: 12px
  background: #fff
  box-shadow: 0 1px 0 rgba(10,30,70,.05)

  &__menu
    list-style: none
    margin: 0
    padding: 0
    display: grid
    row-gap: .25rem

  &__item
    // default state
    &.current .sidebar__navigation__link
      background: color('bg-soft')
      box-shadow: inset 0 0 0 2px mix($brand-500, transparent, 35%)
      font-weight: 700

  &__link
    display: block
    padding: .5rem .625rem
    border-radius: 10px
    text-decoration: none
    color: $ink
    line-height: 1.25
    transition: background .15s ease, box-shadow .15s ease
    outline: 0

    &:hover
      background-color: #D1ECEF // soft teal tint
      color: #0A1E46

    &:focus-visible
      outline: 3px solid mix($brand-700, transparent, 70%)
      outline-offset: 2px
      border-radius: 8px

// Utilities
.visually-hidden
  position: absolute !important
  width: 1px
  height: 1px
  padding: 0
  margin: -1px
  overflow: hidden
  clip: rect(0 0 0 0)
  white-space: nowrap
  border: 0

.visually-hidden-focusable:active,
.visually-hidden-focusable:focus
  position: static !important
  width: auto
  height: auto
  margin: 0
  overflow: visible
  clip: auto
  white-space: inherit

// Responsive
@media (max-width: 960px)
  aside[aria-labelledby="section-nav-title"]
    position: static
  .sidebar__navigation
    padding: .75rem


// tr
//   display: grid
//   grid-template-columns: 30% 1fr max-content
//   column-gap: 1em
//   padding:
//     top: 0.5em
//     bottom: 0.5em
//   border-bottom: em(2) solid color('grey-300')